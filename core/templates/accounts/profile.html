{% extends 'base.html' %}
{% load static %}
{% block content %}
<link rel="stylesheet" href="{% static 'css/accounts/profile.css' %}">
<div id="profile-config"
	data-api-url="{% url 'profile' %}"
	data-default-image="{% static 'img/blog/NoUser.jpg' %}"
	data-posts-url-base="{% url 'blog:api-v1:post-list' %}"
	data-post-detail-template="{% url 'website:blog-single' 0 %}"
	data-post-delete-template="{% url 'blog:api-v1:post-detail' 0 %}"
	data-change-password-url="{% url 'change-password' %}"
	data-resend-activation-url="{% url 'activation-resend' %}"
	data-comment-report-url="{% url 'blog:api-v1:comment-report-list' %}?status=approved"
	data-post-report-url="{% url 'blog:api-v1:post-report-list' %}?status=approved"
	data-friends-url="{% url 'friends:api-v1:friendship-list' %}"
	data-friend-remove-template="{% url 'friends:api-v1:friendship-remove' 0 %}"
	data-friend-requests-url="{% url 'friends:api-v1:friend-request-list' %}"
	data-friend-request-accept-template="{% url 'friends:api-v1:friend-request-accept' 0 %}"
	data-friend-request-decline-template="{% url 'friends:api-v1:friend-request-decline' 0 %}"
	style="display:none;"></div>

<section class="section-gap profile-section">
	<div class="container">
		<div class="row">
			<div class="col-lg-8">
				<div class="profile-panel">
					<div class="profile-panel-header">
						<div>
							<h3 class="profile-panel-title">Post Details</h3>
							<p class="profile-panel-subtitle">Your latest posts and activity</p>
						</div>
						<div class="profile-stats">
							<span id="profile-post-count">0</span>
							Posts
							<div style="height:6px;"></div>
							<span id="profile-view-count">0</span>
							Views
						</div>
					</div>
					<div id="profile-posts" class="profile-posts"></div>
					<div id="profile-posts-empty" class="profile-empty">Loading posts...</div>
					<div id="profile-posts-error" class="profile-error" style="display:none;"></div>
				</div>
			</div>
			<div class="col-lg-4">
				<div class="profile-panel profile-sidebar">
					<div class="profile-avatar-wrap">
						<img id="profile-image" class="profile-avatar" src="{% static 'img/blog/NoUser.jpg' %}" alt="Profile">
					</div>
					<h4 id="profile-name" class="profile-name"></h4>
					{% if request.user.is_authenticated and request.user.is_verified %}
					<div class="profile-verified-wrap">
						<div class="profile-verified">
							<i class="fa fa-check-circle" aria-hidden="true"></i>
							<span>Verified user</span>
						</div>
					</div>
					{% endif %}
					<div id="profile-email" class="profile-meta"></div>
					<p id="profile-description" class="profile-desc">No bio yet.</p>
					<div class="profile-divider"></div>
					<ul class="profile-info-list">
						<li><span>Joined</span><strong id="profile-created">-</strong></li>
						<li><span>Updated</span><strong id="profile-updated">-</strong></li>
					</ul>
					<div class="profile-divider"></div>
					<button id="profile-edit-button" class="profile-edit-button" type="button">Edit profile</button>
					<div id="profile-edit-error" class="profile-error" style="display:none;"></div>
					<button id="profile-password-button" class="profile-password-button" type="button">Change password</button>
					{% if request.user.is_authenticated and not request.user.is_verified %}
					<button id="profile-resend-button" class="profile-resend-button" type="button">Resend verification</button>
					<div id="profile-resend-message" class="profile-resend-message" style="display:none;"></div>
					{% endif %}
					<div class="profile-divider"></div>
					<button id="profile-report-button" class="profile-report-button" type="button">
						<span>Approved reports</span>
						<span id="profile-report-count" class="profile-report-count">0</span>
					</button>
					<div id="profile-report-error" class="profile-error" style="display:none;"></div>
					<div class="profile-divider"></div>
					<button id="profile-friends-button" class="profile-friends-button" type="button">
						<span>Friends</span>
						<span id="profile-friends-count" class="profile-friends-count">0</span>
					</button>
					<div id="profile-friends-error" class="profile-error" style="display:none;"></div>
					<div class="profile-divider"></div>
					<button id="profile-requests-button" class="profile-requests-button" type="button">
						<span>Friend requests</span>
						<span id="profile-requests-count" class="profile-requests-count">0</span>
					</button>
					<div id="profile-requests-error" class="profile-error" style="display:none;"></div>
					<div class="profile-divider"></div>
					<div class="profile-social">
						<a id="profile-facebook" href="#" target="_blank" rel="noopener"><i class="fa fa-facebook"></i></a>
						<a id="profile-twitter" href="#" target="_blank" rel="noopener"><i class="fa fa-twitter"></i></a>
						<a id="profile-github" href="#" target="_blank" rel="noopener"><i class="fa fa-github"></i></a>
						<a id="profile-behance" href="#" target="_blank" rel="noopener"><i class="fa fa-behance"></i></a>
					</div>
					<div id="profile-error" class="profile-error" style="display:none;"></div>
				</div>
			</div>
		</div>
	</div>
</section>

<div id="profile-delete-modal" class="profile-modal">
	<div class="profile-modal-card">
		<h4>Delete this post?</h4>
		<p>This action cannot be undone.</p>
		<div class="profile-modal-actions">
			<button id="profile-delete-cancel" class="profile-modal-button cancel" type="button">No</button>
			<button id="profile-delete-confirm" class="profile-modal-button confirm" type="button">Yes, delete</button>
		</div>
	</div>
</div>

<div id="profile-report-modal" class="profile-modal">
	<div class="profile-modal-card profile-report-card">
		<h4>Approved reports</h4>
		<div id="profile-report-list" class="profile-report-list"></div>
		<div id="profile-report-empty" class="profile-report-empty" style="display:none;">No approved reports yet.</div>
		<div class="profile-modal-actions">
			<button id="profile-report-close" class="profile-modal-button cancel" type="button">Close</button>
		</div>
	</div>
</div>

<div id="profile-friends-modal" class="profile-modal">
	<div class="profile-modal-card profile-report-card">
		<h4>Your friends</h4>
		<div id="profile-friends-list" class="profile-friends-list"></div>
		<div id="profile-friends-empty" class="profile-friends-empty" style="display:none;">No friends yet.</div>
		<div class="profile-modal-actions">
			<button id="profile-friends-close" class="profile-modal-button cancel" type="button">Close</button>
		</div>
	</div>
</div>

<div id="profile-requests-modal" class="profile-modal">
	<div class="profile-modal-card profile-report-card">
		<h4>Friend requests</h4>
		<div id="profile-requests-list" class="profile-requests-list"></div>
		<div id="profile-requests-empty" class="profile-requests-empty" style="display:none;">No pending requests.</div>
		<div class="profile-modal-actions">
			<button id="profile-requests-close" class="profile-modal-button cancel" type="button">Close</button>
		</div>
	</div>
</div>
<div id="profile-edit-modal" class="profile-modal">
	<div class="profile-modal-card profile-report-card">
		<h4>Edit profile</h4>
		<form id="profile-edit-form" class="profile-edit-form">
			<label for="profile-first-name">First name</label>
			<input id="profile-first-name" type="text" name="first_name">
			<label for="profile-last-name">Last name</label>
			<input id="profile-last-name" type="text" name="last_name">
			<label for="profile-description-input">Description</label>
			<textarea id="profile-description-input" name="description" rows="3"></textarea>
			<label for="profile-facebook-input">Facebook URL</label>
			<input id="profile-facebook-input" type="url" name="facebook_url">
			<label for="profile-twitter-input">Twitter URL</label>
			<input id="profile-twitter-input" type="url" name="twitter_url">
			<label for="profile-github-input">GitHub URL</label>
			<input id="profile-github-input" type="url" name="github_url">
			<label for="profile-behance-input">Behance URL</label>
			<input id="profile-behance-input" type="url" name="behance_url">
			<label for="profile-image-input">Profile image</label>
			<input id="profile-image-input" type="file" name="image" accept="image/*">
			<div id="profile-edit-message" class="profile-edit-message" style="display:none;"></div>
			<div class="profile-modal-actions">
				<button id="profile-edit-cancel" class="profile-modal-button cancel" type="button">Cancel</button>
				<button id="profile-edit-save" class="profile-modal-button confirm" type="submit">Save</button>
			</div>
		</form>
	</div>
</div>

<div id="profile-password-modal" class="profile-modal">
	<div class="profile-modal-card profile-report-card">
		<h4>Change password</h4>
		<form id="profile-password-form" class="profile-password-form">
			<input id="password-old" type="password" name="old_password" placeholder="Current password" required>
			<input id="password-new" type="password" name="new_password" placeholder="New password" required>
			<input id="password-new-confirm" type="password" name="new_password1" placeholder="Confirm new password"
				required>
			<div id="profile-password-message" class="profile-password-message" style="display:none;"></div>
			<div class="profile-modal-actions">
				<button id="profile-password-cancel" class="profile-modal-button cancel" type="button">Cancel</button>
				<button id="profile-password-save" class="profile-modal-button confirm" type="submit">Save</button>
			</div>
		</form>
	</div>
</div>

<script src="{% static 'js/accounts/profile.js' %}"></script>
{% endblock %}
